<mat-toolbar>
    <!-- <p>{{currentUrl}}</p> -->
    <!-- <p>{{rootPath}}</p>
    <p>{{urlSegment.length}}</p>
    <p *ngFor = "let seg of urlSegment">
            {{seg.path}}
    </p> -->

    <button mat-flat-button [routerLink]="btn.routerLink" *ngFor="let btn of navButtons"
        [style.background-color]="!btn.isSelected ? 'transparent' : 'gainsboro'">
        <fa-icon [icon]="btn.icon"></fa-icon>
        {{btn.content}}
    </button>
    <button mat-flat-button [matMenuTriggerFor]="appMenu" *jhiHasAnyAuthority="'ROLE_ADMIN'">
        <fa-icon [icon] = "'user-tie'"></fa-icon>
        管理
    </button>
    <mat-menu #appMenu="matMenu">
        <button mat-menu-item [routerLink] = "btn.routerLink" *ngFor = "let btn of adminMenuBtns">
            {{btn.content}}
        </button>
    </mat-menu>

    <!-- <button mat-flat-button routerLink="/disease-xi-an">集团项目</button>
    <button mat-flat-button routerLink="/q-arobot">QA小博士</button>
    <button mat-flat-button routerLink="/service">服务平台</button> -->
    <a href="http://www.kingmed.com.cn/index.aspx">
        <img style="max-height: 40px" src="../../../content/images/kingmedIcon.png" />
    </a>

</mat-toolbar>
<nav class="navbar navbar-expand-md head">
    <a class="navbar-toggler d-lg-none" href="javascript:void(0);" data-toggle="collapse"
        data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false"
        aria-label="Toggle navigation" (click)="toggleNavbar()">
        <fa-icon icon="bars"></fa-icon>
    </a>
    <a href="http://www.kingmed.com.cn/index.aspx">
        <img style="max-height: 20px" src="../../../content/images/kingmedIcon.png" />
    </a>
    <div class="navbar-collapse collapse" id="navbarResponsive" [ngbCollapse]="isNavbarCollapsed"
        [ngSwitch]="isAuthenticated()">
        <ul class="navbar-nav ml-auto">

            <!-- 这是语言切换功能, 暂时不支持
                <li ngbDropdown class="nav-item dropdown pointer" *ngIf="languages && languages.length > 1">
                    <a class="nav-link dropdown-toggle" ngbDropdownToggle href="javascript:void(0);" id="languagesnavBarDropdown">
                        <span>
                            <fa-icon icon="flag"></fa-icon>
                            <span jhiTranslate="global.menu.language">Language</span>
                        </span>
                    </a>
                    <ul class="dropdown-menu" ngbDropdownMenu aria-labelledby="languagesnavBarDropdown">
                        <li *ngFor="let language of languages">
                            <a class="dropdown-item" [jhiActiveMenu]="language" href="javascript:void(0);" (click)="changeLanguage(language);collapseNavbar();">{{language | findLanguageFromKey}}</a>
                        </li>
                    </ul>
                </li>
                -->
            <li ngbDropdown class="nav-item dropdown pointer" placement="bottom-right" routerLinkActive="active"
                [routerLinkActiveOptions]="{exact: true}">
                <a class="nav-link dropdown-toggle" ngbDropdownToggle href="javascript:void(0);" id="account-menu">
                    <span *ngIf="!getImageUrl()">
                        <fa-icon icon="user"></fa-icon>
                        <span>
                            账号
                        </span>
                    </span>
                    <span *ngIf="getImageUrl()">
                        <img [src]="getImageUrl()" class="profile-image rounded-circle" alt="Avatar">
                    </span>
                </a>
                <ul class="dropdown-menu" ngbDropdownMenu aria-labelledby="account-menu">
                    <li *ngSwitchCase="true">
                        <a class="dropdown-item" routerLink="account/settings" routerLinkActive="active"
                            (click)="collapseNavbar()">
                            <fa-icon icon="wrench" fixedWidth="true"></fa-icon>
                            <span>设定</span>
                        </a>
                    </li>
                    <li *ngSwitchCase="true">
                        <a class="dropdown-item" routerLink="account/password" routerLinkActive="active"
                            (click)="collapseNavbar()">
                            <fa-icon icon="clock" fixedWidth="true"></fa-icon>
                            <span>密码</span>
                        </a>
                    </li>
                    <li *ngSwitchCase="true">
                        <a class="dropdown-item" (click)="logout()" id="logout">
                            <fa-icon icon="sign-out-alt" fixedWidth="true"></fa-icon>
                            <span>注销</span>
                        </a>
                    </li>
                    <li *ngSwitchCase="false">
                        <a class="dropdown-item" (click)="login()" id="login">
                            <fa-icon icon="sign-in-alt" fixedWidth="true"></fa-icon>
                            <span>登陆</span>
                        </a>
                    </li>
                    <li *ngSwitchCase="false">
                        <a class="dropdown-item" routerLink="account/register" routerLinkActive="active"
                            (click)="collapseNavbar()">
                            <fa-icon icon="user-plus" fixedWidth="true"></fa-icon>
                            <span>注册</span>
                        </a>
                    </li>
                    <li *ngSwitchCase="true">
                        <a class="dropdown-item" routerLink="account/my-disease" routerLinkActive="active"
                            (click)="collapseNavbar()">
                            <fa-icon icon="book-medical" fixedWidth="true"></fa-icon>
                            <span>我的项目</span>
                        </a>
                    </li>
                </ul>
            </li>
        </ul>
    </div>
</nav>
